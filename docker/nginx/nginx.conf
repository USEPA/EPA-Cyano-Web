upstream cyanweb_flask {
    server cyanweb-flask:5001;
}

server {

    listen  80;

    # Cyanweb Flask API
    location /cyanweb/cyan/app/api {
        include /etc/nginx/uwsgi_params;
        uwsgi_pass cyanweb_flask;
    }

    # Cyano Backend API
    location /cyanweb/cyan/cyano {
        proxy_pass https://cyan.epa.gov/cyan/cyano;
    }

    # Cyan-waterbody Backend API
    location /cyanweb/waterbody {
        proxy_pass https://cyan.epa.gov/waterbody;
    }

    # Cyanweb Frontend
    location /cyanweb {
        alias /usr/share/nginx/html/cyanweb;
        try_files $uri $uri/ /cyanweb/index.html;
    }

}